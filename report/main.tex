\include{settings}

\begin{document}

\include{titlepage}

\section*{Задание на проектирование}

{\bf Срок сдачи законченной работы: } 22.05.2017

\underline{Начальное описание предметной области:}

Структурно предприятие состоит из цехов, которые в свою очередь подразделяются на участки.

Категории изделий, выпускаемых предприятием: грузовые, легковые автомобили, автобусы, сельскохозяйственные, дорожно-строительные машины, мотоциклы и прочие изделия.
Каждая категория изделий имеет специфические, присущие только ей атрибуты.
Например, для автобусов это вместимость, для сельскохозяйственных и дорожно-строительных машин - производительность и т.д.

По каждой категории изделий может собираться несколько видов изделий (под видом изделия понимается конкретная его разновидность / марка - например, автомобиль KIA Rio).
По конкретным экземплярам каждого вида ведётся журнал, где отмечаются даты завершения различных этапов жизненного цикла изделия: изготовление (сборка) / тестирование / передача дилеру / гарантийный ремонт.

Предприятие в основном состоит из производственных цехов, но также есть несколько вспомогательных (например, ремонтный, тестировочный).

Каждая категория изделий собирается в своём производственном цехе (в одном цехе может собираться несколько категорий изделий).
Цех структурно состоит из участков, на каждом из которых выполняется один вид работ: изготавливается определённая часть изделия (например, двигатель) либо производится сборка изделия в целом.
С каждой категорией изделия ассоциируется свой набор работ; другими словами, каждая категория в процессе изготовления должна пройти определённый набор участков в цехе.

Каждой категории инженерно-технического персонала (инженеры, технологи, техники) и рабочих (сборщики, токари, слесари, сварщики и пр.) также характерны атрибуты, свойственные только для этой группы.
Рабочие объединяются в бригады, которыми руководят бригадиры.
Бригадиры выбираются из числа рабочих.
Работу цеха возглавляет начальник цеха, а работу на участке - начальник участка, в подчинении которого находится несколько мастеров.
Каждый мастер координирует работу одной или нескольких бригад (но, в отличие от бригадира, не входит в состав конкретной бригады).
Мастера, начальники участков и цехов назначаются из числа инженерно-технического персонала.
Каждый начальник может руководить только одной структурной единицей (в т.ч. начальник одной структурной единицы не может быть в то же время начальником другой).

Работу по сборке конкретной категории изделия на определенном участке выполняет одна бригада рабочих, при этом она может обслуживать несколько участков / категорий и на одном участке может работать несколько бригад.

\begin{enumerate}

    \item Сотрудники могут быть либо из инженерно-технического персонала (ИТП), либо из числа рабочих.
    \item Каждой категории инженерно-технического персонала (инженеры, технологи, техники) и рабочих (сборщики, токари, слесари, сварщики) характерны атрибуты, свойственные только для этой группы.
    \item Рабочие объединяются в бригады
    \item Бригадиры руководят бригадами и выбираются из числа рабочих.
    \item Мастера, начальники участков и цехов назначаются из числа инженерно-технического персонала.
    \item Каждый начальник может руководить только одной структурной единицей (в т.ч. начальник одной структурной единицы не может быть в то же время начальником другой).

\end{enumerate}

\underline{Варианты запросов к информационной системе:}
\begin{enumerate}

    \item Перечень видов изделий по категории, собираемой указанным цехом.
    В последней строке вывести общее число собираемых видов изделий.

    \item Количество экземпляров изделий каждого вида каждой категории, собранных предприятием за определенный отрезок времени.
    В последней строке вывести общее число собранных изделий.
    Примерный вид результата:

    \begin{tabular}{|p{6cm}|p{2cm}|p{1cm}|} \hline
        Категория & Вид & Кол-во \\ \hline
        Автобусы & АКБ-12 & 8 \\ \hline
        Автобусы & АКБ-05 & 0 \\ \hline
        Автомобили & ИЖ-400 & 12 \\ \hline
        ... & ... & ... \\ \hline
        Всего собрано (12.05.2010-18.07.2010): & & 48 \\ \hline
    \end{tabular}

    \item Данные о кадровом составе (ФИО, должность) по указанным категориям инженерно-технического персонала и рабочих;
    \item Число и перечень участков предприятия и их начальников (с указанием цехов).
    \item Перечень работ, которые проходит указанный вид изделия.
    \item Состав бригад, работающих на указанном участке указанного цеха: ФИО рабочего, номер бригады, номер участка, номер цеха. Отсортировать по номеру бригады.
    \item Перечень мастеров (ФИО) указанного участка указанного цеха и номера бригад, работы которых они координируют.
    \item Информация о цехах, в которых в настоящий момент собирается больше видов изделий, чем в среднем приходится на каждый производственный цех предприятия: номер цеха, название цеха, кол-во собираемых видов изделий, среднее количество видов изделий по цехам предприятия.
    \item Состав бригад, участвующих в сборке указанной категории изделия.
    \item ФИО и должности работников цеха, в котором собирается больше всего категорий изделий.

\end{enumerate}

{\bf Перечень подлежащих разработке вопросов:}
\begin{enumerate}
    \item Проанализировать предметную область, описание которой приведено в выданном варианте задания, и создать логическую модель базы данных.
    \item Провести нормализацию разработанной модели до 5НФ.
    \item Проверить разработанную модель средствами Data Model Validator.
    \item Устранить все замечания по модели, которые выявил Data Model Validator.
    \item Создать физическую модель базы данных, предусмотрев значения по умолчанию и условия проверки вводимых пользователем значений.
    \item Провести прямое проектирование – создать объекты базы данных в Oracle.
    \item Провести обратное проектирование базы данных из Oracle. Убедиться в том, что полученные в результате модели полностью аналогичны исходным.
    \item Проверить корректность произведённого прямого проектирования и выполнение требований, приведённых в описании предметной области (наличие ключей, значений по умолчанию, условий проверки вводимых пользователем значений, связей между таблицами и др.). Проверку произвести, внеся в таблицы базы данных минимум по 5 записей.
    \item Создать 10 SQL-запросов согласно выданному варианту задания. Проверить работоспособность написанных запросов.
    \item Добавить в физическую модель представление на основе SQL-запроса, выбранного по согласованию с преподавателем.
    \item Провести прямое проектирование (перенести созданное представление). Проверить работоспособность представления.
\end{enumerate}

\newpage
\tableofcontents
\newpage

\section{Введение}
В современном мире человек буквально на каждом шагу сталкивается с различными информационными системами.
Начиная от базы данных маленькой школы и заканчивая большими дата-центрами больших компаний.
Однако чем больше необходимо хранить информации, тем больше ее необходимо грамотно (нормализованно) хранить.
Система управления базами данных (СУБД) позволяет создать базу данных, хранить и обновлять в ней данные, а также
СУБД Oracle может быть использована в такой области деятельности, как автомобилестроительное предприятие.
Что я и покажу в данной курсовой работе.

Целью данной работы является спроектировать информационную систему автомобилестроительного предприятия, учитывая техническое задание.

Задачи, которые необходимо выполнить для достижения поставленной цели, перечислены в задании на проектирование.

\newpage

\section{Описание логической модели базы данных}

Диаграммы логической и физической моделей базы данных приведены в Приложении 1 и Приложении 2 соответственно.

\subsection{Сущности, их харрактеристики и связи}
В ходе анализа начального описания предметной области были выявлены следующие сущности:

\begin{enumerate}
    \item{Сотрудник}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Номер\_договора & VARCHAR2(6) & YES & NO & NO \\ \hline
        Имя\_сотрудника & VARCHAR2(14) & NO & NO & NO \\ \hline
        Фамилия\_сотрудника & VARCHAR2(16) & NO & NO & NO \\ \hline
        Отчество\_сотрудника & VARCHAR2(16) & NO & NO & YES \\ \hline
        Тип\_сотрудника & VARCHAR2(1) & NO & NO & NO \\ \hline
        Дата\_рождения & DATE & NO & NO & YES \\ \hline
        Код\_сотрудника & VARCHAR2(15) & NO & NO & NO \\ \hline
        Должность\_сотрудника & VARCHAR2(8) & NO & NO & NO \\ \hline

    \end{tabular}

    На предприятии работают \underline{сотрудики} (в них входят рабочие и представители инженерно-технического персонала) (1).

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf Примечание} \\ \hline
        Номер\_договора &  Договор о найме на роботу, уникален для каждого сотрудника \\ \hline
        Имя\_сотрудника &  Имя сотрудника, не уникально \\ \hline
        Фамилия\_сотрудника & Фамилия сотрудника, не уникально \\ \hline
        Отчество\_сотрудника & Отчество сотрудника, у человека может не быть фамилии \\ \hline
        Тип\_сотрудника & Сотрудник может быть либо рабочим, либо представителем ИТП. Является дискриминатором в категориальной связи \\ \hline
        Дата\_рождения & Дата рождения сотрудника может быть не указана \\ \hline
        Код\_сотрудника & Атрибут, созданный для категориальной связи. Состоит из: Тип\_сотрудника, Должность\_сотрудника и Номер\_договора \\ \hline
        Должность\_сотрудника & Должность, которую занимает сотрудник (все должности, которые есть на предприятии) \\ \hline

    \end{tabular}

    Ключевая группа XAK1Сотрудник:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Код\_сотрудника & Альтернативный ключ для категориальной связи \\ \hline

    \end{tabular}

    \underline{Сотрудник} может быть или из \underline{инженерно-технического персонала}, или из числа \underline{рабочих} (1), что и реализовано с помощью категориальной связи между соответствующими сущностями.

    \item{ИТП}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Код\_сотрудника & VARCHAR2(15) & YES & YES & NO \\ \hline

    \end{tabular}

    \underline{Представитель инженерно-технического персонала} входит в какую-то категорию (\underline{инженер}, \underline{технолог} и \underline{техник}), что реализовано с помощью категориальной связи между соответствующими сущностями.

    \underline{Руководитель} (участок, цех, мастер) выбирается из \underline{ИТП} (5), реализовано с помощью связи один-к-одному между соответствующими сущностями.

    \item{Технолог}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Код\_сотрудника & VARCHAR2(15) & YES & YES & NO \\ \hline
        Специализация\_технолога & VARCHAR2(12) & NO & NO & NO \\ \hline

    \end{tabular}

    Специализация\_технолога может принимать значения: исследования и практика (2).
    Хранит информацию о специализации технолога: практик он или же исследователь.

    \item{Техник}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Код\_сотрудника & VARCHAR2(15) & YES & YES & NO \\ \hline
        Специализация\_техника & VARCHAR2(7) & NO & NO & NO \\ \hline

    \end{tabular}

    Специализация\_техника может принимать значения: схемы и чертежи (2).
    Хранит информацию о специализации техника: специалист в области схем или же чертежей.

    \item{Инженер}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Код\_сотрудника & VARCHAR2(15) & YES & YES & NO \\ \hline
        Специализация\_инженера & VARCHAR2(16) & NO & NO & NO \\ \hline

    \end{tabular}

    Специализация\_инженера может принимать значения: проектирование и прототипирование (2).
    Хранит информацию о специализации инженера: специалист в проектировании или же в прототипировании.

    \item{Рабочий}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Код\_сотрудника & VARCHAR2(15) & YES & YES & NO \\ \hline
        Номер\_бригады & NUMBER(3, 0) & NO & YES & YES \\ \hline

    \end{tabular}

    \underline{Рабочий} входит в какую-то категорию (\underline{сборщик}, \underline{токарь}, \underline{слесарь} и \underline{сварщик}), что реализовано с помощью категориальной связи между соответствующими сущностями.
    \underline{Рабочий} состоит в \underline{бригаде} (3), что и реализовани с помощью связи один-к-одному между соответствующими сущностями.

    Ключевая группа XIE1Рабочий:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Номер\_бригады & Индекс для FK \\ \hline

    \end{tabular}

    \item{Сборщик}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Код\_сотрудника & VARCHAR2(15) & YES & YES & NO \\ \hline
        Специализация\_сборщика & VARCHAR2(9) & NO & NO & NO \\ \hline

    \end{tabular}

    Специализация\_сборщика может принимать значения: двигатель, подвеска и кузов (2).
    Хранит информацию о специализации сборщик: в сборке какой части он специализируется.

    \item{Токарь}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Код\_сотрудника & VARCHAR2(15) & YES & YES & NO \\ \hline
        Разряд\_токаря & NUMBER(1, 0) & NO & NO & NO \\ \hline

    \end{tabular}

    Разряд\_токаря может принимать целые значения от 1 до 7 (2).
    Хранит информацию о разряде токаря: их бывает семь.

    \item{Слесарь}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Код\_сотрудника & VARCHAR2(15) & YES & YES & NO \\ \hline
        Разряд\_слесаря & NUMBER(1, 0) & NO & NO & NO \\ \hline

    \end{tabular}

    Разряд\_слесаря может принимать целые значения от 1 до 6 (2).
    Хранит информацию о разряде слесаря: их бывает шесть.

    \item{Сварщик}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Код\_сотрудника & VARCHAR2(15) & YES & YES & NO \\ \hline
        Специализация\_сварщика & VARCHAR2(8) & NO & NO & NO \\ \hline

    \end{tabular}

    Специализация\_сварщика может принимать значения: подвеска и рама (2).
    Хранит информацию о специализации сварщика: специалист в сварке подвески или же рамы.

    \item{Руководитель}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Код\_сотрудника & VARCHAR2(15) & YES & YES & NO \\ \hline
        Ответственность & VARCHAR2(7) & NO & NO & NO \\ \hline
        Код\_ответств & VARCHAR2(22) & NO & NO & NO \\ \hline

    \end{tabular}

    Была создана как таблица посредник для того, чтобы избежать ошибку Table With Too Many Relationships.

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf Примечание} \\ \hline
        Ответственность & То, чем руководит руководитель: участок, мастер или же цех  \\ \hline
        Код\_ответств & Альтернативный ключ, который используется для связи с цехом, участком и бригадой. Так нельзя будет добавить представителя ИТП сразу начальником и цеха, и участка (6). \\ \hline
    \end{tabular}

    Связана с \underline{Бригада} связью один-ко-многим, так как каждый мастер иожет координировать работу нескольких бригад.
    Связана с \underline{Цех} и \underline{Участок} связью один-к-одному.

    Ключевая группа XAK1Руководитель:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Код\_ответств & Альтернативный ключ для связей, так можно будет проверять соответствие руководителей с их должностями на предпритии \\ \hline

    \end{tabular}

    \item{Бригада}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Номер\_бригады & NUMBER(3, 0) & YES & NO & NO \\ \hline
        Название\_бригады & VARCHAR2(14) & NO & NO & NO \\ \hline
        Бригадир & VARCHAR2(15) & NO & YES & NO \\ \hline
        Мастер & VARCHAR2(22) & NO & YES & NO \\ \hline

    \end{tabular}

    Ключевая группа XAK1Бригада:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Бригадир & У бригады может быть один бригадир\\ \hline

    \end{tabular}

    Ключевая группа XAK2Бригада:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Название\_бригады & В пределах предприятия название уникально \\ \hline

    \end{tabular}

    Ключевая группа XIE1Бригада:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Мастер & Индекс для FK \\ \hline

    \end{tabular}

    \item{Цех}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Номер\_цеха & VARCHAR2(4) & YES & NO & NO \\ \hline
        Начальник\_цеха & VARCHAR2(22) & NO & YES & NO \\ \hline
        Название\_цеха & VARCHAR2(14) & NO & NO & NO \\ \hline

    \end{tabular}

    Цех может быть либо производственным, либо вспомогательным, что и реализовано с помощью категориальной связи между соответствующими сущностями.
    Для того, чтобы нельзя было записать цех и в вспомогательный, и в производственный, в каждом подтипе есть проверка, что номер цеха имеет префикс (П и В соответсвенно).
    А сам номер проверяется на соответствие этим префиксам (детальнее в условиях проверки).

    Ключевая группа XAK2Цех:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Начальник\_цеха & Начальник может быть только один \\ \hline

    \end{tabular}

    Ключевая группа XAK3Цех:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Название\_цеха & Название уникально в пределах предприятия \\ \hline

    \end{tabular}

    \item{Вспомогательный\_цех}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Номер\_цеха & VARCHAR2(4) & YES & YES & NO \\ \hline
        Тип\_вспомогательного\_цеха & VARCHAR2(13) & NO & NO & NO \\ \hline

    \end{tabular}

    Номер\_цеха должен иметь перфикс, соответствующий вспомогательному цеху.
    Тип\_вспомогательного\_цеха содержит информацию о типе вспомогательного цеха.
    Напрмер, ремонтный и тестировочный.

    \item{Производственный\_цех}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Номер\_цеха & VARCHAR2(4) & YES & YES & NO \\ \hline
        Колво\_сбор\_конв & NUMBER(2, 0) & NO & NO & NO \\ \hline

    \end{tabular}

    Номер\_цеха должен иметь перфикс, соответствующий производственному цеху.
    Колво\_сбор\_конв содержит положительное число, которое соответсвует количеству сборочных конвейеров на конкретном производственном цеху.

    \item{Участок}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Номер\_цеха & VARCHAR2(4) & YES & YES & NO \\ \hline
        Номер\_участка & NUMBER(3, 0) & YES & NO & NO \\ \hline
        Начальник\_участка & VARCHAR2(22) & NO & YES & NO \\ \hline
        Тип\_участка & VARCHAR2(9) & NO & NO & NO \\ \hline
        Название\_участка & VARCHAR2(13) & NO & NO & NO \\ \hline

    \end{tabular}

    В одном \underline{цеху} может быть несколько \underline{участков}, что и реализовано с помощью связи один-ко-многим между соответствующими сущностями.
    У \underline{участка} может быть один \underline{начальник (руководитель)}, что и реализовано с помощью связи один-к-одному между соответствующими сущностями.

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf Примечание} \\ \hline
        Номер\_цеха & Номер цеха \\ \hline
        Номер\_участка & Номер участка уникален в пределах цеха \\ \hline
        Начальник\_участка & Уникален в пределах предприятия \\ \hline
        Тип\_участка & Может принимать значения: сборка и изготовка \\ \hline
        Название\_участка & Уникально в пределах предприятия \\ \hline

    \end{tabular}

    Ключевая группа XAK1Участок:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Начальник\_участка & У участка может быть один начальник и этот начальник может возглавлять только один участок \\ \hline

    \end{tabular}

    Ключевая группа XAK2Участок:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Название\_участка & Уникально в пределах цеха \\ \hline

    \end{tabular}

    \item{Категория\_изделия}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Номер\_категории\_изделия & VARCHAR2(3) & YES & NO & NO \\ \hline
        Номер\_цеха & VARCHAR2(4) & NO & YES & NO \\ \hline
        Код\_категории & VARCHAR2(12) & NO & NO & NO \\ \hline
        Тип\_категории & VARCHAR2(9) & NO & NO & NO \\ \hline

    \end{tabular}

    В одном \underline{цеху} может собираться несколько \underline{категорий изделий}, что и реализовано с помощью связи один-ко-многим между соответсвующими сущностями.
    \underline{Категория\_изделия} связана категориальной связью с \underline{Мотоциклы}, \underline{Автобусы}, \underline{Грузовые\_автомобили}.

    Тип\_категории содержит категории, которые собираются на предприятии: мотоциклы, автобусы и грузовые автомобили.
    Код\_категории - атрибут, созданный для категориальной связи и сотоит из Тип\_категории и Нормер\_категории\_изделия.

    Ключевая группа XAK1Категория\_изделия:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Номер\_категории\_изделия \newline Номер\_цеха & Этот AK нужен для того, чтобы можно было связать с таблицей \underline{Работы}, а там проверять равенство цехов \\ \hline

    \end{tabular}

    Ключевая группа XAK2Категория\_изделия:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Код\_категории & AK для категориальной связи \\ \hline

    \end{tabular}

    \item{Мотоциклы}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Код\_категории & VARCHAR2(12) & YES & YES & NO \\ \hline
        Колво\_тактов\_мотора & NUMBER(1, 0) & NO & NO & NO \\ \hline

    \end{tabular}

    Код\_категории должен содержать префикс 'Мотоциклы'. Из-за этого мы не сможем добавить категорию сразу в несколько подтипов.
    Колво\_тактов\_мотора содержит информацию о количестве тактов мотора для категории мотоциклы.

    \item{Автобусы}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Код\_категории & VARCHAR2(12) & YES & YES & NO \\ \hline
        Вместимость & NUMBER(4, 0) & NO & NO & NO \\ \hline

    \end{tabular}

    Код\_категории должен содержать префикс 'Автобусы'. Из-за этого мы не сможем добавить категорию сразу в несколько подтипов.
    Вместимость содержит информацию о количестве людей, которые помещаются в автобус.

    \item{Грузовые\_автомобили}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Код\_категории & VARCHAR2(12) & YES & YES & NO \\ \hline
        Грузоподъемность & NUMBER(5, 0) & NO & NO & NO \\ \hline

    \end{tabular}

    Код\_категории должен содержать префикс 'Грузовые'. Из-за этого мы не сможем добавить категорию сразу в несколько подтипов.
    Грузоподъемность содержит информацию о грузоподъемности грузового автомобиля в килограммах.

    \item{Работы}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Номер\_участка & NUMBER(3, 0) & YES & YES & NO \\ \hline
        Номер\_категории\_изделия & VARCHAR2(3) & YES & YES & NO \\ \hline
        Номер\_бригады & NUMBER(3, 0) & NO & YES & NO \\ \hline
        Номер\_цеха & VARCHAR2(4) & NO & YES & NO \\ \hline

    \end{tabular}

    \underline{Работу} по сборке конкретной категории изделия на определенном участке выполняет одна \underline{бригада} рабочих, что и реализован с помощью связи один-ко-многим между соответсвующими сущностями.
    Так, известно, что конкретная бригада собирает какую-то категорию на каком-то участке.

    Также имеются связи один-ко-многим между \underline{Работы} и \underline{Участок}, а также \underline{Работы} и \underline{Категория\_изделия}.

    Ключевая группа XIE1Работы:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Номер\_категории\_изделия \newline Номер\_цеха & Индекс для FK \\ \hline

    \end{tabular}

    Ключевая группа XIE2Работы:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Номер\_цеха \newline Номер\_участка & Индекс для FK \\ \hline

    \end{tabular}

    Ключевая группа XIE3Работы:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Номер\_бригады & Индекс для FK \\ \hline

    \end{tabular}

    \item{Вид\_изделия}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Номер\_вида\_изделия & VARCHAR2(4) & YES & NO & NO \\ \hline
        Название\_вида\_изделия & VARCHAR2(18) & NO & NO & NO \\ \hline
        Номер\_категории\_изделия & VARCHAR2(3) & NO & YES & NO \\ \hline

    \end{tabular}

    По каждой \underline{категории изделий} может собираться несколько \underline{видов изделий}.

    Ключевая группа XAK1Вид\_изделия:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Название\_вида\_изделия & Название вида уникально \\ \hline

    \end{tabular}

    Ключевая группа XIE1Вид\_изделия:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Номер\_категории\_изделия & Индекс для FK \\ \hline

    \end{tabular}

    \item{Экземпляр\_изделия}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Номер\_экземпляра & NUMBER(6, 0) & YES & NO & NO \\ \hline
        Номер\_вида\_изделия & VARCHAR2(4) & NO & YES & NO \\ \hline

    \end{tabular}

    Одного \underline{вида} изделия может собираться несколько экземпляров, что и реализовано с помощью связи один-ко-многим между соответсвующими сущностями.

    Ключевая группа XIE1Экземпляр\_изделия:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Номер\_вида\_изделия & Индекс для FK \\ \hline

    \end{tabular}

    \item{Журнал}

    \begin{tabular}{|p{7cm}|p{3cm}|p{1cm}|p{1cm}|p{3cm}|} \hline

        {\bf COLUMN\_NAME} & {\bf DATA\_TYPE} & {\bf PK} & {\bf FK} & {\bf NULLABLE} \\ \hline
        Позиция\_в\_журнале & NUMBER(8, 0) & YES & NO & NO \\ \hline
        Начало & DATE & NO & NO & NO \\ \hline
        Конец & DATE & NO & NO & YES \\ \hline
        Жизненный\_цикл & VARCHAR2(18) & NO & NO & NO \\ \hline
        Номер\_экземпляра & NUMBER(6, 0) & NO & YES & NO \\ \hline

    \end{tabular}

    По конкретным \underline{экземплярам каждого вида} ведётся \underline{журнал}, что и реализовано с помощью связи один-ко-многим между соответсвующими сущностями.
    Жизненный\_цикл изделия: сборка, тестирование, передача дилеру, гарантийный ремонт.

    Ключевая группа XIE1Журнал:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Номер\_экземпляра & Индекс для FK \\ \hline

    \end{tabular}

    Ключевая группа XAK1Журнал:

    \begin{tabular}{|p{7cm}|p{9.3cm}|} \hline

        {\bf Имя атрибута} & {\bf Примечание} \\ \hline
        Начало \newline Жизенный\_цикл \newline Номер\_экземпляра & Алтернативный ключ.
        Так как конкретный экземпляр может несколько раз собираться (например, его собрали и после тестирования поняли что, что-то не так и собрали заново), быть на гарантийном ремонте и т.д. \\ \hline

    \end{tabular}

\end{enumerate}

\subsection {Нормализация}
Нормализацией называется формальная процедура, в ходе которой создается оптимизированная структура базы данных, позволяющая избегать различные виды аномалий.

\begin{itemize}
    \item Первая нормальная форма (1 НФ)
    \item Вторая нормальная форма (2 НФ)
    \item Третья нормальная форма (3 НФ)
    \item Нормальная форма Бойса-Кодда (НФБК)
    \item Четвертая нормальная форма (4 НФ)
    \item Пятая нормальная форма (5 НФ)
\end{itemize}

{\bf Проверим на первую нормальную форму:}

Отношение находится в первой нормальной форме, тогда, когда на пересечении каждой строки и каждого столбца содержится ровно одно значение.
Во всех приведенных сущностях соблюдается атомарность данных.
Следовательно, все отношения в модели подчиняются 1 НФ.

{\bf Проверим на 2 нормальную форму:}

Отношение находится во второй нормальной форме тогда, когда отношение находится в 1 НФ, и нет неключевых атрибутов, зависящих от части сложного ключа.
Проверять нужно только сущности, содержащие сложные ключевые атрибуты:

\begin{itemize}

    \item Мастер\_бригада({\bf Номер\_договора}, {\bf ИД\_бригады})

\end{itemize}

У сущностей Мастер\_бригада, Мастер\_начальник и Работы нет неключевых атрибутов.
У сущности Участок:
\begin{itemize}

    \item Тип\_участка не зависит от номера участка, так как это могут быть участки из разных цехов.
    Тип\_участка не зависит от номера цеха, так как это могут быть цеха с разными участками.
    \item Номер\_договора не зависит от номера участка, так как это могут быть участки из разных цехов.
    Номер\_договора не зависит от номера цеха, так как это могут быть цеха с разными участками.

\end{itemize}

Следовательно, все отношения в модели находятся в 2 НФ.

{\bf Проверим на 3 нормальную форму:}

Отношение находится в третьей нормальной форме тогда, когда отношение находится в 2НФ, и все неключевые атрибуты взаимно независимы.
Проверять нужно только сущности, содержащие больше одного неключевого атрибута:

\begin{itemize}

    \item Сотрудник({\bf Номер\_договора}, Имя\_сотрудника, Фамилия\_сотрудника, Отчество\_сотрудника)
    \item Рабочий({\bf Номер\_договора}, ИД\_категории\_рабочего, ИД\_бригады)
    \item Участок({\bf Номер\_участка}, {\bf Номер\_цеха}, Тип\_участка, Номер\_договора)
    \item Журнал({\bf Позиция\_в\_журнале}, Начало, Завершение, Название\_вида\_изделия, Номер\_участка)
\end{itemize}

Рассмотрим эти сущности:

\begin{itemize}
    \item В сущности \underline{сотрудник} фамилия не зависит от имени или отчества, имя не зависит от фамилии или отчетства, а также отчетсво не зависит от имени или фамилии.

    \item В сущности \underline{рабочий} катеория рабочего не зависит от номера его бригады, также как и бригада не зависит от его категории.

    \item В сущности \underline{участок} номер договора начальника не зависит от типа участка, точно также как и тип участка не зависит от начальника участка.

    \item В сущности \underline{журнал} номер участка не зависит от даты завершения работы, а дата завершения работы не завист от номера участка.

\end{itemize}

Следовательно, все отношения в модели находятся в 3 НФ.

{\bf Проверка на нормальную форму Бойса-Кодда:}

Отношение находится в нормальной форме Бойса-Кодда тогда, когда отношение находится в 3 НФ, и любая выполняемая для этого отношения нетривиальная и минимальная функциональная зависимость имеет в качестве детерминанта некоторый возможный ключ данного отношения.
Проверять нужно только сущности, содержащие несколько пересекающихся потенциальных ключей: таких сущностей нет.

Следовательно, все модели в сущности находятся в НФБК.

{\bf Проверка на 4 нормальную форму:}

Отношение находится в четвертой нормальной форме тогда, когда отношение находится в НФБК и не содержит нетривиальных многозначных зависимостей.
Проверять нужно только сущности, имеющие в составе первичного ключа три атрибута и более: таких сущностей нет.

Следовательно, все модели в сущности находятся в 4 НФ.

{\bf Проверка на 5 нормальную форму:}

Отношение находится в пятой нормальной форме тогда, когда отношение находится в 4 НФ, и каждая нетривиальная зависимость соединения в нём определяется потенциальным ключом (ключами) этого отношения.
Проверять нужно только сущности, имеющие в составе первичного ключа три атрибута и более: таких сущностей нет.

Следовательно, все модели в сущности находятся в 5 НФ.

\subsection{Условия проверки и значения по умолчанию для атрибутов}

Для атрибута {\bf Тип\_участка} сущности \underline{Участок} были определены допустимые значения: Изготовка" и "Сборка".
Так как на участке может выполняться один из этих видов работ (19).

\section {Отчёт по замечаниям ERwin Data Model Validator}

\includegraphics[width=12cm]{./screenshots/validator/validator.png}

ERwin Data Model Validator выдает ошибку Infinite Loop.
Это связано с тем, что отношения Бригада и Рабочий имеют две связи один ко многим.
Так как по условию нам дано следующее: рабочие объединяются в бригады, которыми руководят бригадиры, а бригадиры выбираются из числа рабочих.
Следовательно, выбранные связи обоснованы.

Обосную, почему эта ошибка не окажет никакого воздействия не схему.
Связи имеют Cardinality: Zero, One or More.
А следовательно, даже при пустой таблице мы можем вставить данные, указав Null.

Использование No Action on delete поможет нам запретить удаление бригады, пока мы не перевели всех ее работников.
Да и неприйтной ситуации с Delete Cascade можно избежать

\section{Реализация запросов к базе данных}

\begin{enumerate}

    \item Перечень видов изделий по категории, собираемой указанным цехом.
    В последней строке вывести общее число собираемых видов изделий.

    \lstinputlisting[language=SQL]{../sources/queries/task1.sql}

    \includegraphics[width=11cm]{./screenshots/results/result1.png}

    \item Количество экземпляров изделий каждого вида каждой категории, собранных предприятием за определенный отрезок времени.
    В последней строке вывести общее число собранных изделий.

    \lstinputlisting[language=SQL]{../sources/queries/task2.sql}

    \includegraphics[width=11cm]{./screenshots/results/result2.png}

    \item Данные о кадровом составе (ФИО, должность) по указанным категориям инженерно-технического персонала и рабочих;

    \lstinputlisting[language=SQL]{../sources/queries/task3.sql}

    \includegraphics[width=11cm]{./screenshots/results/result3.png}

    \item Число и перечень участков предприятия и их начальников (с указанием цехов).

    \lstinputlisting[language=SQL]{../sources/queries/task4.sql}

    \includegraphics[width=11cm]{./screenshots/results/result4.png}

    \item Перечень работ, которые проходит указанный вид изделия.

    \lstinputlisting[language=SQL]{../sources/queries/task5.sql}

    \includegraphics[width=11cm]{./screenshots/results/result5.png}

    \item Состав бригад, работающих на указанном участке указанного цеха: ФИО рабочего, номер бригады, номер участка, номер цеха. Отсортировать по номеру бригады.

    \lstinputlisting[language=SQL]{../sources/queries/task6.sql}

    \includegraphics[width=11cm]{./screenshots/results/result6.png}

    \item Перечень мастеров (ФИО) указанного участка указанного цеха и номера бригад, работы которых они координируют.

    \lstinputlisting[language=SQL]{../sources/queries/task7.sql}

    \includegraphics[width=11cm]{./screenshots/results/result7.png}

    \item Информация о цехах, в которых в настоящий момент собирается больше видов изделий, чем в среднем приходится на каждый производственный цех предприятия: номер цеха, название цеха, кол-во собираемых видов изделий, среднее количество видов изделий по цехам предприятия.

    \lstinputlisting[language=SQL]{../sources/queries/task8.sql}

    \includegraphics[width=11cm]{./screenshots/results/result8.png}

    \item Состав бригад, участвующих в сборке указанной категории изделия.

    \lstinputlisting[language=SQL]{../sources/queries/task9.sql}

    \includegraphics[width=11cm]{./screenshots/results/result9.png}

    \item ФИО и должности работников цеха, в котором собирается больше всего категорий изделий.

    \lstinputlisting[language=SQL]{../sources/queries/task10.sql}

    \includegraphics[width=11cm]{./screenshots/results/result10.png}

\end{enumerate}

\section{Создание представления}
Создал view представление запроса №4.
Так как все запросы, кроме 4, 8 и 10 нуждаются в подстановочных переменных.
10 запрос требует операции со множествами (именно UNION), а 8 LEFT JOIN.
Следовательно, был выбран единственный вариант, именно 4 запрос.
Однако с небольшим изменением, так как в 4 запросе использован UNION ALL, чтобы аккуратно добавить его в конец таблицы.
А в представлении это же значение удалось вывести в последнюю колонку.

\includegraphics[width=11cm]{./screenshots/view/sql.png}

Результат удовлетворяет требованиям и схож с запросом.

\includegraphics[width=11cm]{./screenshots/view/result.png}

\section{Доказательства выполнения ограничивающих требований, привиденных в описании предметной области}

Проведем проверку.

Попробуем добавить уже существую категорию:

\includegraphics[width=11cm]{./screenshots/constraints/cat_itp.png}

Попробуем добавить участок, с неправильным типом:

\includegraphics[width=11cm]{./screenshots/constraints/field_type.png}

Попробуем добавить участок, с несуществующим руководителем:

\includegraphics[width=11cm]{./screenshots/constraints/field.png}

Попробуем добавить запись в журнал для несуществующего вида:

\includegraphics[width=11cm]{./screenshots/constraints/list.png}

Попробуем добавить запись в журнал для несуществующего вида:

\includegraphics[width=11cm]{./screenshots/constraints/list.png}

\section{Приложение 1}

    Логическая модель.

    \includegraphics[width=11cm]{./screenshots/model/logical1.png}

    \includegraphics[width=11cm]{./screenshots/model/logical2.png}

\section{Приложение 2}

    Физическая модель.

    \includegraphics[width=14cm]{./screenshots/model/physical.png}

\section{Приложение 3}

    Физическая модель после обратного проектирования.

    \includegraphics[width=11cm]{./screenshots/model/reverse1.png}

    \includegraphics[width=11cm]{./screenshots/model/reverse2.png}

\section{Заключение}
В результате работы была спроектирована информационная система автомобилестроительного предприятия.
Была проведена нормализация разработанной модели до 5НФ.
Была проверена разработанная модель мредствами ERwin Data Model Validator r7, а также устранены все возможные замечания.
Проведено прямое и обратное проектирование.
Создано представление на основе 4 запроса.
Созданы 10 SQL-запросов и проверена их работоспособность.

Были закреплены теоретические и пркатические знания.

\section{Список использованных источников}

\begin{enumerate}

    \item Конспект лекций
    \item БАЗЫ ДАННЫХ. ПРАКТИКУМ. ЧАСТЬ 2. ORACLE SQL, О. Ю. Сабинин, Н. В. Андреева
    \item Материалы, доступные на dl.spbstu.ru

\end{enumerate}

\end{document}